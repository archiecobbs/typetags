<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (25) -->
<title>TypeTag (TypeTags 1.0.0 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: org.dellroad.typetags.core, annotation type: TypeTag">
<meta name="generator" content="javadoc/ClassWriter">
<link rel="stylesheet" type="text/css" href="../../../../resource-files/jquery-ui.min.css">
<link rel="stylesheet" type="text/css" href="../../../../resource-files/stylesheet.css">
<script type="text/javascript" src="../../../../script-files/script.js"></script>
<script type="text/javascript" src="../../../../script-files/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../script-files/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">const pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="nav-content">
<div class="nav-menu-button"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button></div>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/TypeTag.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../search.html">Search</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
</div>
<div class="sub-nav">
<div class="nav-content">
<ol class="sub-nav-list">
<li><a href="package-summary.html">org.dellroad.typetags.core</a></li>
<li><a href="TypeTag.html" class="current-selection">TypeTag</a></li>
</ol>
<div class="nav-list-search"><input type="text" id="search-input" disabled placeholder="Search documentation (type /)" aria-label="Search in documentation" autocomplete="off" spellcheck="false"><input type="reset" id="reset-search" disabled value="Reset"></div>
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="main-grid">
<nav role="navigation" class="toc" aria-label="Table of contents">
<div class="toc-header">Contents&nbsp;<input type="text" class="filter-input" disabled placeholder="Filter contents (type .)" aria-label="Filter table of contents" autocomplete="off" spellcheck="false"><input type="reset" class="reset-filter" disabled tabindex="-1" value="Reset"></div>
<ol class="toc-list" tabindex="-1">
<li><a href="#" tabindex="0">Description</a></li>
<li><a href="#annotation-interface-required-element-summary" tabindex="0">Required Element Summary</a></li>
<li><a href="#annotation-interface-optional-element-summary" tabindex="0">Optional Element Summary</a></li>
<li><a href="#annotation-interface-element-detail" tabindex="0">Element Details</a>
<ol class="toc-list">
<li><a href="#restrictTo()" tabindex="0">restrictTo</a></li>
<li><a href="#validatedBy()" tabindex="0">validatedBy</a></li>
</ol>
</li>
</ol>
<button class="hide-sidebar"><span>Hide sidebar&nbsp;</span><img src="../../../../resource-files/left.svg" alt="Hide sidebar"></button><button class="show-sidebar"><img src="../../../../resource-files/right.svg" alt="Show sidebar"><span>&nbsp;Show sidebar</span></button></nav>
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<h1 title="Annotation Interface TypeTag" class="title">Annotation Interface TypeTag</h1>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="horizontal-scroll">
<div class="type-signature"><span class="annotations"><a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/annotation/Documented.html" title="class or interface in java.lang.annotation" class="external-link">@Documented</a>
<a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/annotation/Retention.html" title="class or interface in java.lang.annotation" class="external-link">@Retention</a>(<a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/annotation/RetentionPolicy.html#RUNTIME" title="class or interface in java.lang.annotation" class="external-link">RUNTIME</a>)
<a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/annotation/Target.html" title="class or interface in java.lang.annotation" class="external-link">@Target</a>(<a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/annotation/ElementType.html#ANNOTATION_TYPE" title="class or interface in java.lang.annotation" class="external-link">ANNOTATION_TYPE</a>)
</span><span class="modifiers">public @interface </span><span class="element-name type-name-label">TypeTag</span></div>
<div class="block">Meta-annotation for type annotations that can be validated at compile time and runtime by TypeTags.

<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.27.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.27.0/components/prism-java.min.js"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.27.0/themes/prism.min.css" rel="stylesheet"/>

<p>
The <code>org.dellroad.typetags.checker.TypeTagsChecker</code> plug-in to the Checker framework recognizes such annotations
at compile time and checks for invalid assignments. The TypeTags Runtime Weaver provides support for runtime
checking (see below).

<p>
In the descriptions below, the "target annotation" is the annotation to which this meta-annotation is applied.
The target annotation, also known as a "TypeTag", is some annotation that is applied to Java types and which
represents the assertion that some predicate is true of any value assigned to the corresponding field, parameter,
or variable.

<p>
The <a href="TypeTag.html" title="annotation interface in org.dellroad.typetags.core"><code>@TypeTag</code></a> meta-annotation defines how, at runtime, those assertion(s) are verified. For example:

<pre><code class="language-java"> &#47;**
  * Annotates declarations of type {&#64;link String} for which
  * the value, if non-null, is a valid E.164 phone number.
  *&#47;
 &#64;Retention(RetentionPolicy.RUNTIME)
 &#64;Target(ElementType.TYPE_USE)
 &#64;TypeTag(restrictTo = String.class, validatedBy = PhoneNumberValidator.class)
 public &#64;interface PhoneNumber {
 }

 // Validator for the &#64;PhoneNumber annotation
 public static class PhoneNumberValidator implements TypeTagValidator {

     // E.164 format
     private static final String PATTERN = "\\+[1-9][0-9]{6,14}";

     &#64;Override
     public void validate(Class&gt;? extends Annotation&gt; annotationType, Object value) {

         // Value must be a <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link"><code>String</code></a>
         final String string = (String)value;

         // Check for proper format (ignore null values, they should be checked elsewhere)
         if (string != null &amp;&amp; !string.matches(PhoneNumber.PATTERN))
             throw new TypeRestrictionException("not a valid E.164 phone number");
     }
 }
</code></pre>

<p>
At compile time, the checker verifies the type restriction when it's possible to do so at compile time:

<pre><code class="language-java"> String input = scanner.nextLine();
 &#64;PhoneNumber String pn = input;     // error: type restriction not satisfied
</code></pre>

<p>
Otherwise, casts and <code>instanceof</code> checks will be performed at runtime:

<pre><code class="language-java"> String input = scanner.nextLine();
 if (input instanceof &#64;PhoneNumber String)   // runtime check performed here
     &#64;PhoneNumber String pn = (&#64;PhoneNumber String)input2;
</code></pre>

<p>
These runtime checks are added by the TypeTags Runtime Weaver using classfile modification.</div>
</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== ANNOTATION INTERFACE REQUIRED MEMBER SUMMARY =========== -->
<li>
<section class="member-summary" id="annotation-interface-required-element-summary">
<h2>Required Element Summary</h2>
<div class="caption"><span>Required Elements</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Required Element</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code><a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a><wbr>&lt;? extends <a href="TypeTagValidator.html" title="interface in org.dellroad.typetags.core">TypeTagValidator</a>&gt;</code></div>
<div class="col-second even-row-color"><code><a href="#validatedBy()" class="member-name-link">validatedBy</a></code></div>
<div class="col-last even-row-color">
<div class="block">Specify the <a href="TypeTagValidator.html" title="interface in org.dellroad.typetags.core"><code>TypeTagValidator</code></a> class that validates values at runtime.</div>
</div>
</div>
</section>
</li>
<!-- =========== ANNOTATION INTERFACE OPTIONAL MEMBER SUMMARY =========== -->
<li>
<section class="member-summary" id="annotation-interface-optional-element-summary">
<h2>Optional Element Summary</h2>
<div class="caption"><span>Optional Elements</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Optional Element</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code><a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;?&gt;[]</code></div>
<div class="col-second even-row-color"><code><a href="#restrictTo()" class="member-name-link">restrictTo</a></code></div>
<div class="col-last even-row-color">
<div class="block">Restrict valid values to being instances of one the specified types.</div>
</div>
</div>
</section>
</li>
</ul>
</section>
<section class="details" id="annotation-interface-element-detail">
<ul class="details-list">
<!-- ============ ANNOTATION INTERFACE MEMBER DETAIL =========== -->
<li>
<section class="member-details">
<h2>Element Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="restrictTo()">
<h3>restrictTo</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;?&gt;[]</span>&nbsp;<span class="element-name">restrictTo</span></div>
<div class="block">Restrict valid values to being instances of one the specified types.
This property is applied both at compile time and at runtime.

<p>
If this property is set, then during compilation any value that is not assignable to one of the
specified types is considered invalid and will generate an error. At runtime, it is the responsibility
of the <a href="#validatedBy()"><code>validatedBy()</code></a> class to perform the same check.

<p>
To not restrict values by type, leave this property set to its default value, i.e., an empty array.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the supertype(s) of all valid values, or empty for no restriction</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd><code>{}</code></dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="validatedBy()">
<h3>validatedBy</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;? extends <a href="TypeTagValidator.html" title="interface in org.dellroad.typetags.core">TypeTagValidator</a>&gt;</span>&nbsp;<span class="element-name">validatedBy</span></div>
<div class="block">Specify the <a href="TypeTagValidator.html" title="interface in org.dellroad.typetags.core"><code>TypeTagValidator</code></a> class that validates values at runtime.

<p>
The specified class must have a static, zero-argument method named <code>getInstance()</code> that provides
an instance of itself. That instance is responsible for validating the <code>value</code> is an instance of
one of the <a href="#restrictTo()"><code>restrictTo()</code></a> types (if any), as well as any other requirements specific to the
target annotation.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>runtime validator class</dd>
</dl>
</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2025. All rights reserved.</small></p>
</footer>
</main>
</div>
</body>
</html>
